<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="stylesheet" type="text/css" href="maintpl.css" />
<title>cpgf metagen -- C++ meta data generator for reflection and script binding</title>
</head>
<body><div style="width:900px">






<h1>cpgf metagen -- C++ meta data generator for reflection and script binding </h1>



<a name="top"></a>


<p>
<b>
<a href="docs-cpgf-tools-meta-data-generator.html#linkid1">
<strong>Metagen</strong></a></b></p>
<div style="margin-left:0px">
<ul>
<li>
<a href="docs-cpgf-tools-meta-data-generator.html#linkid2">
<strong>Get start</strong></a></li>
<li>
<a href="docs-cpgf-tools-meta-data-generator.html#linkid3">
<strong>Prepare Doxygen XML files</strong></a></li>
<li>
<a href="docs-cpgf-tools-meta-data-generator.html#linkid4">
<strong>Write config file</strong></a></li>
<li>
<a href="docs-cpgf-tools-meta-data-generator.html#linkid5">
<strong>Tool command line options</strong></a></li>
<li>
<a href="docs-cpgf-tools-meta-data-generator.html#linkid6">
<strong>The status and capability of the tool</strong></a></li>
</ul>
</div>


<p><a name="linkid1"></a></p>
<h3>Metagen</h3><p><a name="linkid2"></a></p>
<p>
<strong>Get start</strong><span style="margin-left:100px;font-size:small"><a href="docs-cpgf-tools-meta-data-generator.html#top">back top</a></span></p>
Metagen is a tool to generate meta data from Doxygen XML automatically and generate the corresponding C++ code.<br />
The tool itself is writter in Perl, tested with Perl 5.8 on Windows and Perl 5.10 on Ubuntu.<br />
The tool require XML Dom package which may be not in your Perl default installation.<br />
<br />
To use this tool, you need very basic Perl knowledge to understand the config file format which is a piece of Perl script.<br />
<br />
The tool is in folder cpgf/tools/metagen.<br />
The Box2D meta data generator is in folder cpgf/tools/metagen/metagen_box2d, there are Doxygen project, metagen config file, and shell script to execute the tool. The are good sample for start.<br />
<br />


<p><a name="linkid3"></a></p>
<p>
<strong>Prepare Doxygen XML files</strong><span style="margin-left:100px;font-size:small"><a href="docs-cpgf-tools-meta-data-generator.html#top">back top</a></span></p>
The tool uses Doxygen XML files for C++ code information.<br />
The tool only needs the code information, so your C++ code is not necessary Doxygen documented.<br />
If you are going to generate meta data for a library, all header files with public API should be included in the Doxygen project, otherwise, base classes information may be missed.<br />
<br />
Below listed Doxygen tags and values which required by metagen and has non-default value.<br />
<br />
EXTRACT_ALL = YES<br />
EXTRACT_STATIC = YES<br />
SHOW_INCLUDE_FILES = NO<br />
GENERATE_TODOLIST = NO<br />
GENERATE_TESTLIST = NO<br />
GENERATE_BUGLIST = NO<br />
GENERATE_DEPRECATEDLIST = NO<br />
SHOW_USED_FILES = NO<br />
SHOW_FILES = NO<br />
REFERENCES_LINK_SOURCE = NO<br />
VERBATIM_HEADERS = NO<br />
GENERATE_HTML = NO<br />
GENERATE_LATEX = NO<br />
GENERATE_XML = YES<br />
XML_PROGRAMLISTING = NO<br />
<br />


<p><a name="linkid4"></a></p>
<p>
<strong>Write config file</strong><span style="margin-left:100px;font-size:small"><a href="docs-cpgf-tools-meta-data-generator.html#top">back top</a></span></p>
Metagen needs a config file to obtain necessary information.<br />
The config file itself is a Perl script with a variable named $config, which is a hash reference.<br />
$config contains several key-value pairs.<br />
<br />
There is a config.default.pl in the tool package, the keys in it are documented.<br />
Also config.box2d.pl in Box2D generator is a good use case.<br />
<br />
Beside $config, any valid Perl code can be put into the config file, such as temporary variable, sub routines, etc.<br />
<br />
Note: don't prefix $config with &quot;my&quot;. $config should not be local variable.<br />
<br />


<p><a name="linkid5"></a></p>
<p>
<strong>Tool command line options</strong><span style="margin-left:100px;font-size:small"><a href="docs-cpgf-tools-meta-data-generator.html#top">back top</a></span></p>
To execute the tool, run,<br />
perl metagen.pl<br />
Then it will display usage information.<br />
Note for Unix/Linux user, don't try to run the script directly. Use Perl to invoke it. There is no the &quot;#!&quot; first line in the script to indicate for the intercepter.<br />
<br />
Metagen takes two must-have options.<br />
--xml DoxygenXMLFileName<br />
--config ConfigFileName<br />
<br />
DoxygenXMLFileName can be any valid Doxygen XML file name. But usually it should be the index.xml.<br />
The tool will parse the XML file, and all XML files it references to. So a index.xml is enough to parse all library.<br />
<br />
ConfigFileName is the config Perl script.<br />
<br />
There are two optional options, --headerOutput and --sourceOutput.<br />
If they are provided in the command line, they will override the same name config in the config file.<br />
<br />
Here is the command line used to generate meta data for Box2D, as an example,<br />
<div class="codepiece"">perl ../metagen.pl --xml xml/index.xml --config config.box2d.pl <br />
</div><br />



<p><a name="linkid6"></a></p>
<p>
<strong>The status and capability of the tool</strong><span style="margin-left:100px;font-size:small"><a href="docs-cpgf-tools-meta-data-generator.html#top">back top</a></span></p>
Currently metagen has basic features.<br />
It succeeds on generating meta data for Box2D physical engine.<br />
So for simple library, the tool should be quite useful. &quot;simple&quot; here means no need for scripting, or need scripting but no event or callback system and no a lot need to override virtual functions in script, etc.<br />
<br />
Now the tool can only generate meta data, it can't automatically deal with special case for scripting usage, such as wrap operator to functions.<br />
<br />
If you are going to generate meta data to use in script, here are some limitations:<br />
1, The tool can't wrap operator to functions, such as add &quot;inc&quot; function for &quot;++&quot; operator. This will be supported in near future.<br />
2, The tool can't help to let script override C++ virtual functions. This will be supported in the future.<br />
3, The tool can't handle script callback as we did in Glut binding manually. This may be supported in the future.<br />
<br />
The future goal of the tool is to be able to generate script usable meta data for wxWidgets or equivalent complex libraries.<br />
<br />













</div></body></html>

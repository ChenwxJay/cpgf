set(TARGET_BENCHMARK benchmark)

set(OUTNAME_BENCHMARK benchmark)

set(BENCHMARK_ROOT ${ROOT_PATH}/benchmark)

set(BENCHMARK_COMPILE_FLAGS " ")
if(CMAKE_COMPILER_IS_GNUCC OR "${CMAKE_CXX_COMPILER_ID}" STREQUAL "Clang")
	set(BENCHMARK_COMPILE_FLAGS "-Wall -Wextra -Wundef -O3")

	set(BENCHMARK_COMPILE_FLAGS "${BENCHMARK_COMPILE_FLAGS} -std=c++11")

endif(CMAKE_COMPILER_IS_GNUCC OR "${CMAKE_CXX_COMPILER_ID}" STREQUAL "Clang")

if(MSVC)
	set(BENCHMARK_COMPILE_FLAGS "-W3 -O3")
endif(MSVC)


file(GLOB GLOB_BENCHMARK_COMMON ${BENCHMARK_ROOT}/*.cpp)
file(GLOB GLOB_BENCHMARK_TESTS ${BENCHMARK_ROOT}/tests/*.cpp)

add_executable(
	${TARGET_BENCHMARK}
	EXCLUDE_FROM_ALL
	${GLOB_BENCHMARK_COMMON}
	${GLOB_BENCHMARK_TESTS}
)

set_target_properties(
	${TARGET_BENCHMARK}
	PROPERTIES
	OUTPUT_NAME ${OUTNAME_BENCHMARK}
	COMPILE_FLAGS ${BENCHMARK_COMPILE_FLAGS}
)

target_link_libraries(${TARGET_BENCHMARK} ${TARGET_LIB} ${LUA_LIB})
